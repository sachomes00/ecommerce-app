<%= form_with model: @order, id: "payment-form" do |form| %>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <%= form.label "Name (optional)" %>
        <%= form.text_field :name, class: 'form-control border-input', value: 'John Doe'%>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <%= form.label "Email (optional)" %>
        <%= form.text_field :email, class: 'form-control border-input', value: 'john@doe.com' %>
      </div>
    </div>
  </div>
  <div id="saved-card" data-card=<%= @saved_card %>></div>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <% if current_user.stripe_customer_id.nil? %>
          <label for="card-element">
            Credit or debit card
          </label>
          <div id="card-element">
          </div>
          <div id="card-errors" role="alert"></div>
        <% end %>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="form-actions pull-right">
        <button class="btn btn-primary">Submit Payment</button>
      </div>
    </div>
  </div>
<% end %>
<%= javascript_pack_tag "payment_form", defer: true %>
